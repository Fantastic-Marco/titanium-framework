# Https 协议



### 简介
HTTPS 是 HTTP 协议的安全版本，它使用 SSL 或 TLS 协议来保护数据在网络上传输的安全。  
HTTPS 的主要目标是确保数据的机密性、完整性和可用性。

SSL 协议是早期Https的主要实现，从1999年开始换成了TLS协议，替代了SSL 3.0  

**TLS 的版本**  
TLS 1.0：1999 年发布，取代了 SSL 3.0。  
TLS 1.1：2006 年发布，解决了 SSL 3.0 和 TLS 1.0 中的一些问题。  
TLS 1.2：2008 年发布，目前广泛使用，提供了更好的安全性。  
TLS 1.3：2018 年发布，最新的版本，进行了大量的改进，提高了性能和安全性，简化了握手过程。   


### TLS 1.2 原理
![https 流程](../img/Https.png)

1. 客户端发起Https流程，Client Hello,提供自身支持的TLS版本，加密算法范围以及随机数（客户端随机数）
2. 服务端收到 Client Hello 之后，通过自身的TLS版本支持情况，选择了客户端和服务端都支持的版本， 
选择了客户端和服务端都支持的加密算法，并且也生成了一个随机数（服务端随机数）
3. 服务端提供CA证书，表明自己的身份，客户端可以通过到CA 机构校验合法性
4. 服务端提供自己的公钥给客户端
5. 服务端 发送 Server Hello Done 表明自己已经打完招呼了
6. 客户端向服务端提供自己的公钥
7. 客户端对服务端选择的TLS版本和加密算法表示认可，没有异议
8. 使用服务端提供的公钥加密一个随机数，称为预主密钥，发送给服务端
9. 服务端获得预主密钥之后，使用自己的私钥进行解密

通过上述步骤之后，客户端和服务端各自都有了 客户端随机数，服务端随机数，预主密钥  
服务端和客户端各自通过 客户端随机数，服务端随机数，预主密钥 生成会话密钥，后面的会话都用会话密钥来进行对称加密


加密算法
通信建立过程使用**非对称加密**
通信建立之后使用**对称加密**进行对话